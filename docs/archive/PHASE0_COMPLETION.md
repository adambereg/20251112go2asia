# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –§–∞–∑—ã 0 ‚Äî –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω

**–î–∞—Ç–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω—ã–π –ø–ª–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 0

---

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 0 –ø—Ä–æ–µ–∫—Ç–∞ Go2Asia. –í—Å–µ –∑–∞–¥–∞—á–∏ —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏.

---

## ‚úÖ –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ Lighthouse CI

### 1.1 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–µ–ø–ª–æ–µ

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å GitHub ‚Üí Actions ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π —É—Å–ø–µ—à–Ω—ã–π "Deploy to Staging"
2. –ù–∞–π—Ç–∏ —à–∞–≥ "Lighthouse CI"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - Performance ‚â• 85 ‚úÖ
   - SEO ‚â• 85 ‚úÖ
   - Best Practices ‚â• 85 ‚úÖ
   - Accessibility ‚â• 80 (warning)

**–ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã Lighthouse (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é CSS/JS
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CDN

**–°—Ç–∞—Ç—É—Å:** [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

---

## ‚úÖ –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Alerts

### 2.1 –û—Ç–∫—Ä—ã—Ç—å Cloudflare Dashboard

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –í–æ–π—Ç–∏ –≤ Cloudflare Dashboard
2. –í—ã–±—Ä–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç (staging –∏–ª–∏ production)
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ Analytics ‚Üí Alerts

### 2.2 –°–æ–∑–¥–∞—Ç—å –∞–ª—ë—Ä—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ `docs/ops/ALERTS.md`

**–ê–ª—ë—Ä—Ç 1: 5xx Spike (P0)**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `5xx Spike - API Gateway`
- **–£—Å–ª–æ–≤–∏–µ:** Error rate > 1% –∑–∞ 5 –º–∏–Ω—É—Ç
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_requests_total{status_code=~"5.."}`
- **Threshold:** 1%
- **Window:** 5 –º–∏–Ω—É—Ç
- **–ö–∞–Ω–∞–ª:** Email/Slack
- **–§–æ—Ä–º–∞—Ç:** –°–º. `docs/ops/ALERTS.md`

**–ê–ª—ë—Ä—Ç 2: Latency p95 (P0)**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `Latency p95 - Public GET`
- **–£—Å–ª–æ–≤–∏–µ:** p95 latency > 300ms –∑–∞ 10 –º–∏–Ω—É—Ç
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_request_duration_seconds{method="GET"}`
- **Threshold:** 300ms
- **Window:** 10 –º–∏–Ω—É—Ç
- **–ö–∞–Ω–∞–ª:** Email/Slack

**–ê–ª—ë—Ä—Ç 3: Timeouts (P0)**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `Timeouts to Services`
- **–£—Å–ª–æ–≤–∏–µ:** Timeout count > N –∑–∞ 10 –º–∏–Ω—É—Ç
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_request_timeouts_total`
- **Threshold:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **Window:** 10 –º–∏–Ω—É—Ç

**–ê–ª—ë—Ä—Ç 4: Rate Limit Hits (P1)**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `Rate Limit Hits - Public Endpoints`
- **–£—Å–ª–æ–≤–∏–µ:** 429 responses spike
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_requests_total{status_code="429"}`
- **Threshold:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **Window:** 5 –º–∏–Ω—É—Ç

**–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:**
- API Gateway
- Content Service
- Auth Service
- Token Service
- Referral Service

**–°—Ç–∞—Ç—É—Å:** [ ] –ê–ª—ë—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## ‚úÖ –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ SLO/SLI –¥–∞—à–±–æ—Ä–¥–æ–≤

### 3.1 –°–æ–∑–¥–∞—Ç—å Custom Dashboard –≤ Cloudflare

**–î–µ–π—Å—Ç–≤–∏—è:**
1. Cloudflare Dashboard ‚Üí Analytics ‚Üí Custom Dashboard
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥: "Go2Asia SLO/SLI"

### 3.2 –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ `docs/ops/SLO_SLI.md`

**–í–∏–¥–∂–µ—Ç 1: Availability (30 –¥–Ω–µ–π)**
- **–¢–∏–ø:** Time Series
- **–ú–µ—Ç—Ä–∏–∫–∞:** `(1 - error_rate) * 100`
- **–ü–µ—Ä–∏–æ–¥:** 30 –¥–Ω–µ–π
- **SLO:** 99.5%

**–í–∏–¥–∂–µ—Ç 2: Error Rate**
- **–¢–∏–ø:** Time Series
- **–ú–µ—Ç—Ä–∏–∫–∞:** `error_rate = 5xx / total`
- **SLO:** < 1%

**–í–∏–¥–∂–µ—Ç 3: Latency p95**
- **–¢–∏–ø:** Time Series
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_request_duration_seconds{p95}`
- **SLO:** < 300ms –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö GET

**–í–∏–¥–∂–µ—Ç 4: Throughput**
- **–¢–∏–ø:** Counter
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_requests_total`

**–í–∏–¥–∂–µ—Ç 5: 429 Rate**
- **–¢–∏–ø:** Time Series
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_requests_total{status_code="429"}`

**–í–∏–¥–∂–µ—Ç 6: Timeouts**
- **–¢–∏–ø:** Time Series
- **–ú–µ—Ç—Ä–∏–∫–∞:** `http_request_timeouts_total`

**–í–∏–¥–∂–µ—Ç 7: Error Budget**
- **–¢–∏–ø:** Gauge
- **–§–æ—Ä–º—É–ª–∞:** `(SLO - current_availability) / SLO * 100`
- **–¶–≤–µ—Ç:** –ó–µ–ª—ë–Ω—ã–π (> 50%), –ñ—ë–ª—Ç—ã–π (20-50%), –ö—Ä–∞—Å–Ω—ã–π (< 20%)

**–°—Ç–∞—Ç—É—Å:** [ ] –î–∞—à–±–æ—Ä–¥—ã —Å–æ–∑–¥–∞–Ω—ã

---

## ‚úÖ –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ Cloudflare Workers

### 4.1 Content Service

**Staging Worker:**
1. Cloudflare Dashboard ‚Üí Workers & Pages ‚Üí `go2asia-content-service-staging`
2. Settings ‚Üí Variables and Secrets
3. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:
   - `DATABASE_URL` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `STAGING_DATABASE_URL` (GitHub Secrets)
   - `SERVICE_JWT_SECRET` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ GitHub Secrets

**Production Worker:**
1. Cloudflare Dashboard ‚Üí Workers & Pages ‚Üí `go2asia-content-service-production`
2. Settings ‚Üí Variables and Secrets
3. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:
   - `DATABASE_URL` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `PRODUCTION_DATABASE_URL` (GitHub Secrets)
   - `SERVICE_JWT_SECRET` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ GitHub Secrets

### 4.2 Auth Service

**Staging Worker:**
- `CLERK_SECRET_KEY`
- `CLERK_WEBHOOK_SECRET`
- `SERVICE_JWT_SECRET`

**Production Worker:**
- `CLERK_SECRET_KEY`
- `CLERK_WEBHOOK_SECRET`
- `SERVICE_JWT_SECRET`

### 4.3 Token Service

**Staging Worker:**
- `DATABASE_URL` (staging)
- `SERVICE_JWT_SECRET`

**Production Worker:**
- `DATABASE_URL` (production)
- `SERVICE_JWT_SECRET`

### 4.4 Referral Service

**Staging Worker:**
- `DATABASE_URL` (staging)
- `SERVICE_JWT_SECRET`

**Production Worker:**
- `DATABASE_URL` (production)
- `SERVICE_JWT_SECRET`

**–°—Ç–∞—Ç—É—Å:** [ ] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

**üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `docs/ops/CLOUDFLARE_SECRETS_GUIDE.md`

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ Go/No-Go –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

### 5.1 –ü—Ä–æ–π—Ç–∏ —á–µ–∫–ª–∏—Å—Ç –∏–∑ `docs/ops/GO_NO_GO.md`

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏:**

1. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã + Smoke/E2E –∑–µ–ª—ë–Ω—ã–µ**
   - [ ] PR checks –ø—Ä–æ—Ö–æ–¥—è—Ç
   - [ ] OpenAPI –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç
   - [ ] Smoke tests –Ω–∞ staging –ø—Ä–æ—Ö–æ–¥—è—Ç
   - [ ] E2E tests –Ω–∞ preview –ø—Ä–æ—Ö–æ–¥—è—Ç

2. **Edge-–∫—ç—à –≤–∫–ª—é—á—ë–Ω**
   - [ ] –ü—É–±–ª–∏—á–Ω—ã–µ GET –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ Cache-Control –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `no-store`
   - [ ] Contract tests –¥–ª—è –∫—ç—à–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç

3. **Lighthouse ‚â• 85**
   - [ ] Performance ‚â• 85
   - [ ] SEO ‚â• 85
   - [ ] Best Practices ‚â• 85

4. **–ê–ª—ë—Ä—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã**
   - [ ] –ê–ª—ë—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–®–∞–≥ 2)
   - [ ] SLO/SLI –¥–∞—à–±–æ—Ä–¥—ã —Å–æ–∑–¥–∞–Ω—ã (–®–∞–≥ 3)
   - [ ] Runbooks –≥–æ—Ç–æ–≤—ã (`docs/ops/RUNBOOKS.md`)

5. **PITR/rollback –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**
   - [ ] Neon PITR –≤–∫–ª—é—á—ë–Ω
   - [ ] Rollback –º–∏–≥—Ä–∞—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
   - [ ] Rollback –¥–µ–ø–ª–æ—è —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å:** [ ] –í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

## ‚úÖ –®–∞–≥ 6: –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 6.1 –û–±–Ω–æ–≤–∏—Ç—å README.md

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –§–∞–∑—ã 0 —Å "–∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 95%" –Ω–∞ "–∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 100%"
2. –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
3. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –§–∞–∑—ã 0

### 6.2 –°–æ–∑–¥–∞—Ç—å GitHub Release

**–î–µ–π—Å—Ç–≤–∏—è:**
1. GitHub ‚Üí Releases ‚Üí Create a new release
2. Tag: `v0.1.0`
3. Title: "–§–∞–∑–∞ 0: –ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à—ë–Ω"
4. –û–ø–∏—Å–∞–Ω–∏–µ:
   - –°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
   - –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

**–°—Ç–∞—Ç—É—Å:** [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –®–∞–≥ 1: Lighthouse CI –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [ ] –®–∞–≥ 2: Cloudflare Alerts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –®–∞–≥ 3: SLO/SLI –¥–∞—à–±–æ—Ä–¥—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –®–∞–≥ 4: –°–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Cloudflare Workers
- [ ] –®–∞–≥ 5: Go/No-Go –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –®–∞–≥ 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ä—É—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∞–ª—ë—Ä—Ç—ã, –¥–∞—à–±–æ—Ä–¥—ã, —Å–µ–∫—Ä–µ—Ç—ã) –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Cloudflare Dashboard
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –§–∞–∑–µ 1
- –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–º. —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ `docs/ops/`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-13

