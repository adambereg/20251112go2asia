# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ GitHub Actions Workflows

**–î–∞—Ç–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –§–∞–∑—ã 0

---

## üìã –û–±–∑–æ—Ä Workflows

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö workflow:

1. **PR Checks** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request
2. **Preview Deploy** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π preview –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR
3. **Deploy to Staging** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π staging –ø—Ä–∏ push –≤ main
4. **Promote to Production** ‚Äî —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π production (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ workflow_dispatch)

---

## üîÑ –¢—Ä–∏–≥–≥–µ—Ä—ã Workflows

### 1. PR Checks (`pr-checks.yml`)

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
```yaml
on:
  pull_request:
    branches: [main]
```

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request –≤ –≤–µ—Ç–∫—É `main`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Pull Request (–Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
- –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 2. Preview Deploy (`preview-deploy.yml`)

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
```yaml
on:
  pull_request:
    branches: [main]
```

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request –≤ –≤–µ—Ç–∫—É `main`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Pull Request

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
- –î–µ–ø–ª–æ–∏—Ç –Ω–∞ Netlify Preview
- –ó–∞–ø—É—Å–∫–∞–µ—Ç smoke tests
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Lighthouse CI (–µ—Å–ª–∏ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω)
- –ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç PR —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 3. Deploy to Staging (`staging-deploy.yml`)

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
```yaml
on:
  push:
    branches: [main]
  workflow_dispatch:
```

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É `main`
- ‚úÖ –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "Run workflow" –≤ GitHub Actions

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (staging)
- –î–µ–ø–ª–æ–∏—Ç API Gateway –≤ Cloudflare (staging)
- –î–µ–ø–ª–æ–∏—Ç —Å–µ—Ä–≤–∏—Å—ã –≤ Cloudflare (staging)
- –î–µ–ø–ª–æ–∏—Ç PWA –Ω–∞ Netlify (staging)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç smoke tests
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Lighthouse CI (–µ—Å–ª–∏ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ main

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ! Staging –¥–æ–ª–∂–µ–Ω –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

### 4. Promote to Production (`production-deploy.yml`)

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
```yaml
on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Version tag to deploy (e.g., v0.1.0)'
        required: true
        type: string
      confirm:
        description: 'Type "deploy" to confirm production deployment'
        required: true
        type: string
```

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- ‚ùå **–ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- ‚úÖ **–¢–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "Run workflow" –≤ GitHub Actions
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ "deploy" –≤ –ø–æ–ª–µ confirm)
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –≤–µ—Ä—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, v0.1.0)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤–µ—Ä—Å–∏—è, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä—Å–∏—é –∏–∑ git —Ç–µ–≥–∞
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (production)
- –î–µ–ø–ª–æ–∏—Ç API Gateway –≤ Cloudflare (production)
- –î–µ–ø–ª–æ–∏—Ç —Å–µ—Ä–≤–∏—Å—ã –≤ Cloudflare (production)
- –î–µ–ø–ª–æ–∏—Ç PWA –Ω–∞ Netlify (production)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç smoke tests
- –û—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –°–æ–∑–¥–∞—ë—Ç GitHub Release

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é (–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** Production **–Ω–∏–∫–æ–≥–¥–∞** –Ω–µ –¥–µ–ø–ª–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Production –Ω–µ –¥–µ–ø–ª–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –°–ø–æ—Å–æ–± 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ —Ñ–∞–π–ª–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã production workflow
cat .github/workflows/production-deploy.yml | grep -A 5 "^on:"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ:
```yaml
on:
  workflow_dispatch:
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- `push:`
- `pull_request:`
- `schedule:`

### –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ GitHub UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub ‚Üí Actions
2. –ù–∞–π–¥–∏—Ç–µ workflow "Promote to Production"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "This workflow has a `workflow_dispatch` event trigger"
5. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ `workflow_dispatch` ‚Äî –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ

### –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub ‚Üí Actions ‚Üí "Promote to Production"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É "Event" –≤ —Å–ø–∏—Å–∫–µ –∑–∞–ø—É—Å–∫–æ–≤
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ "workflow_dispatch" (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫)
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "push" –∏–ª–∏ "pull_request" ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ ‚ùå

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ü–æ—á–µ–º—É —è –≤–∏–∂—É –∑–∞–ø—É—Å–∫–∏ Production –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ Staging?

**A:** –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–°—Ç–∞—Ä—ã–µ –∑–∞–ø—É—Å–∫–∏** ‚Äî –≤—ã –≤–∏–¥–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä—É—á–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
2. **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫** ‚Äî –∫—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª "Run workflow" –¥–ª—è Production
3. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥–æ–π workflow

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–æ–ª–æ–Ω–∫—É "Event" ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "workflow_dispatch"
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–æ–ª–æ–Ω–∫—É "Actor" ‚Äî –∫—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª workflow
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

### Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π Staging?

**A:** –î–∞, –Ω–æ —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. Staging –¥–æ–ª–∂–µ–Ω –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–ï—Å–ª–∏ –≤—Å—ë –∂–µ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:
```yaml
# –í staging-deploy.yml —É–±—Ä–∞—Ç—å:
on:
  push:
    branches: [main]
  
# –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:
on:
  workflow_dispatch:
```

### Q: –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Production –¥–µ–ø–ª–æ–π –≤—Ä—É—á–Ω—É—é?

**A:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub ‚Üí Actions
2. –í—ã–±–µ—Ä–∏—Ç–µ workflow "Promote to Production"
3. –ù–∞–∂–º–∏—Ç–µ "Run workflow"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **Version:** `v0.1.0` (–∏–ª–∏ –¥—Ä—É–≥–∞—è –≤–µ—Ä—Å–∏—è)
   - **Confirm:** `deploy` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
5. –ù–∞–∂–º–∏—Ç–µ "Run workflow"

---

## ‚úÖ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)

| Workflow | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ | –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ | –°—Ç–∞—Ç—É—Å |
|----------|----------------------|---------------|--------|
| PR Checks | ‚úÖ –ü—Ä–∏ PR | ‚ùå | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| Preview Deploy | ‚úÖ –ü—Ä–∏ PR | ‚ùå | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| Deploy to Staging | ‚úÖ –ü—Ä–∏ push –≤ main | ‚úÖ | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| Promote to Production | ‚ùå | ‚úÖ –¢–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Production Environment Protection

Production workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Environments —Å –∑–∞—â–∏—Ç–æ–π:

- **Required reviewers:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç `adambereg`
- **Deployment branches:** –¢–æ–ª—å–∫–æ –≤–µ—Ç–∫–∞ `main`
- **Wait timer:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É)

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –ø—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ Production workflow –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç —Ä–µ–≤—å—é–µ—Ä–∞.

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **Staging –¥–æ–ª–∂–µ–Ω –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **Production –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã** –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ä–µ–ª–∏–∑–æ–º
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏** –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Production —Ä–µ–ª–∏–∑–æ–≤

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-13

