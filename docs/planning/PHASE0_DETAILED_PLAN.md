# üìã –§–∞–∑–∞ 0 ‚Äî –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-12  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–í–µ—Ä—Å–∏—è:** 1.0

> **–¶–µ–ª—å –§–∞–∑—ã 0:** –°–æ–∑–¥–∞—Ç—å –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞ Go2Asia —Å —á–∏—Å—Ç—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∏–∑–±–µ–∂–∞–Ω–∏–µ–º –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

---

## üìä –û–±–∑–æ—Ä –§–∞–∑—ã 0

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥—É–ª–∏ (9 –º–æ–¥—É–ª–µ–π)
–ù–∞ –§–∞–∑–µ 0 **–Ω–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è**, –Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∏—Ö –±—É–¥—É—â–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. **Guru Asia** ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞–± "—Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π"
2. **Atlas Asia** ‚Äî –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –ª–æ–∫–∞—Ü–∏—è—Ö
3. **Pulse Asia** ‚Äî —Å–æ–±—ã—Ç–∏—è –∏ –∞—Ñ–∏—à–∞
4. **Blog Asia** ‚Äî –º–µ–¥–∏–∞—Ü–µ–Ω—Ç—Ä
5. **Rielt.Market Asia** ‚Äî –∞—Ä–µ–Ω–¥–∞ –∂–∏–ª—å—è
6. **Russian Friendly Asia** ‚Äî –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
7. **Space Asia** ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
8. **Connect Asia** ‚Äî —ç–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
9. **Quest Asia** ‚Äî –∫–≤–µ—Å—Ç—ã –∏ –º–∏—Å—Å–∏–∏

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
–ù–∞ –§–∞–∑–µ 0 —Å–æ–∑–¥–∞—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:

- **API Gateway** ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö API
- **Auth Service** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **Content Service** ‚Äî –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–π API
- **Token Service** ‚Äî —É—á—ë—Ç Points (off-chain)
- **Referral Service** ‚Äî —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

---

## üìÖ –î–µ–Ω—å 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω–æ—Ä–µ–ø–æ

### üéØ –¶–µ–ª—å –¥–Ω—è
–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∫–∞–ø—Å—É–ª –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 1.1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω–æ—Ä–µ–ø–æ
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `go2asia-monorepo`
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `pnpm` workspace
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `Turborepo` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–±–æ—Ä–æ–∫
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `package.json` —Å workspace –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.gitignore` –¥–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
go2asia-monorepo/
‚îú‚îÄ‚îÄ package.json          # –ö–æ—Ä–Ω–µ–≤–æ–π package.json —Å workspaces
‚îú‚îÄ‚îÄ pnpm-workspace.yaml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pnpm workspaces
‚îú‚îÄ‚îÄ turbo.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Turborepo
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/        # CI/CD workflows
‚îú‚îÄ‚îÄ apps/                 # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã)
‚îú‚îÄ‚îÄ services/             # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (–±—ç–∫–µ–Ω–¥—ã)
‚îú‚îÄ‚îÄ packages/             # –û–±—â–∏–µ –ø–∞–∫–µ—Ç—ã
‚îî‚îÄ‚îÄ docs/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

#### 1.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–ø—Å—É–ª

**Apps (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã):**
- [ ] –°–æ–∑–¥–∞—Ç—å `apps/go2asia-pwa-shell/` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π PWA shell
- [ ] –°–æ–∑–¥–∞—Ç—å `apps/api-gateway/` ‚Äî API Gateway (Cloudflare Worker)

**Services (–±—ç–∫–µ–Ω–¥—ã):**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/auth-service/` ‚Äî —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `services/content-service/` ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- [ ] –°–æ–∑–¥–∞—Ç—å `services/token-service/` ‚Äî —Å–µ—Ä–≤–∏—Å —Ç–æ–∫–µ–Ω–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `services/referral-service/` ‚Äî —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å

**Packages (–æ–±—â–∏–µ –ø–∞–∫–µ—Ç—ã):**
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/ui/` ‚Äî –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/types/` ‚Äî TypeScript —Ç–∏–ø—ã (–±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/sdk/` ‚Äî API –∫–ª–∏–µ–Ω—Ç (–±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/config/` ‚Äî –æ–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ (ESLint, Prettier, TS)
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/logger/` ‚Äî –µ–¥–∏–Ω—ã–π –ª–æ–≥–≥–µ—Ä
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/schemas/` ‚Äî Zod —Å—Ö–µ–º—ã

#### 1.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

**–ö–æ—Ä–Ω–µ–≤–æ–π `package.json`:**
```json
{
  "name": "go2asia-monorepo",
  "private": true,
  "workspaces": [
    "apps/*",
    "services/*",
    "packages/*"
  ],
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "lint": "turbo run lint",
    "typecheck": "turbo run typecheck",
    "test": "turbo run test",
    "clean": "turbo run clean",
    "gen:types": "orval --types",
    "gen:sdk": "orval --sdk",
    "gen:all": "pnpm gen:types && pnpm gen:sdk",
    "validate:openapi": "spectral lint docs/openapi/**/*.yaml"
  },
  "devDependencies": {
    "@orval/core": "latest",
    "@stoplight/spectral-cli": "latest",
    "turbo": "latest",
    "typescript": "^5.0.0"
  }
}
```

#### 1.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–≤

- [ ] –°–æ–∑–¥–∞—Ç—å `packages/config/eslint-config/` —Å –±–∞–∑–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/config/prettier-config/` —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/config/tsconfig/` —Å –±–∞–∑–æ–≤—ã–º–∏ TS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–æ –∑–∞–ø—Ä–µ—Ç–∞ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤:
  ```js
  // .eslintrc.cjs
  "no-restricted-imports": ["error", {
    "patterns": ["../../services/*", "../../apps/*"]
  }]
  ```
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `lint-staged` –¥–ª—è pre-commit —Ö—É–∫–æ–≤

#### 1.5. –ö–∞—Ä–∫–∞—Å Next.js (PWA Shell)

- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Next.js 15 –≤ `apps/go2asia-pwa-shell/`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å App Router
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  ```
  apps/go2asia-pwa-shell/
  ‚îú‚îÄ‚îÄ app/
  ‚îÇ   ‚îú‚îÄ‚îÄ (public)/        # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (SSR/SSG)
  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ atlas/
  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blog/
  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pulse/
  ‚îÇ   ‚îú‚îÄ‚îÄ (private)/       # –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (SPA)
  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connect/
  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/
  ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
  ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
  ‚îú‚îÄ‚îÄ components/
  ‚îú‚îÄ‚îÄ lib/
  ‚îî‚îÄ‚îÄ package.json
  ```
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Tailwind CSS + shadcn/ui
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π layout —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

#### 1.6. –ö–∞—Ä–∫–∞—Å API Gateway

- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Cloudflare Worker –≤ `apps/api-gateway/`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Hono –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  ```
  apps/api-gateway/
  ‚îú‚îÄ‚îÄ src/
  ‚îÇ   ‚îú‚îÄ‚îÄ index.ts         # Entry point
  ‚îÇ   ‚îú‚îÄ‚îÄ routes/          # –ú–∞—Ä—à—Ä—É—Ç—ã
  ‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # Middleware (auth, validation, logging)
  ‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã (proxy, error handling)
  ‚îú‚îÄ‚îÄ wrangler.toml
  ‚îî‚îÄ‚îÄ package.json
  ```
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –∫ —Å–µ—Ä–≤–∏—Å–∞–º

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ –≥–æ—Ç–æ–≤–∞  
‚úÖ –í—Å–µ –∫–∞–ø—Å—É–ª—ã —Å–æ–∑–¥–∞–Ω—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–∞—Ä–∫–∞—Å–æ–º  
‚úÖ –õ–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
‚úÖ PWA Shell –∏ API Gateway –∏–º–µ—é—Ç –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üìÖ –î–µ–Ω—å 2: OpenAPI –∫–∞—Ä–∫–∞—Å

### üéØ –¶–µ–ª—å –¥–Ω—è
–û–ø–∏—Å—ã–≤–∞–µ–º –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–∏–ø–æ–≤ –∏ SDK.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 2.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π

- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `docs/openapi/`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
  - [ ] `content.yaml` ‚Äî Content Service API
  - [ ] `auth.yaml` ‚Äî Auth Service API
  - [ ] `token.yaml` ‚Äî Token Service API
  - [ ] `referral.yaml` ‚Äî Referral Service API

#### 2.2. Content Service API (`content.yaml`)

**Endpoints:**
- [ ] `GET /v1/countries` ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω
- [ ] `GET /v1/countries/{id}` ‚Äî –¥–µ—Ç–∞–ª–∏ —Å—Ç—Ä–∞–Ω—ã
- [ ] `GET /v1/cities` ‚Äî —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- [ ] `GET /v1/cities/{id}` ‚Äî –¥–µ—Ç–∞–ª–∏ –≥–æ—Ä–æ–¥–∞
- [ ] `GET /v1/places` ‚Äî —Å–ø–∏—Å–æ–∫ –º–µ—Å—Ç (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- [ ] `GET /v1/places/{id}` ‚Äî –¥–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞
- [ ] `GET /v1/events` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
- [ ] `GET /v1/events/{id}` ‚Äî –¥–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è
- [ ] `GET /v1/articles` ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
- [ ] `GET /v1/articles/{slug}` ‚Äî –¥–µ—Ç–∞–ª–∏ —Å—Ç–∞—Ç—å–∏

**–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö:**
- [ ] `Country` ‚Äî –º–æ–¥–µ–ª—å —Å—Ç—Ä–∞–Ω—ã
- [ ] `City` ‚Äî –º–æ–¥–µ–ª—å –≥–æ—Ä–æ–¥–∞
- [ ] `Place` ‚Äî –º–æ–¥–µ–ª—å –º–µ—Å—Ç–∞
- [ ] `Event` ‚Äî –º–æ–¥–µ–ª—å —Å–æ–±—ã—Ç–∏—è
- [ ] `Article` ‚Äî –º–æ–¥–µ–ª—å —Å—Ç–∞—Ç—å–∏
- [ ] `ErrorResponse` ‚Äî –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫

#### 2.3. Auth Service API (`auth.yaml`)

**Endpoints:**
- [ ] `GET /v1/profile` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (auth required)
- [ ] `POST /v1/webhook/clerk` ‚Äî webhook –æ—Ç Clerk (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö:**
- [ ] `UserProfile` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] `ClerkWebhook` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ webhook –æ—Ç Clerk

#### 2.4. Token Service API (`token.yaml`)

**Endpoints:**
- [ ] `GET /v1/balance` ‚Äî –±–∞–ª–∞–Ω—Å Points (auth required)
- [ ] `GET /v1/transactions` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (auth required)
- [ ] `POST /v1/add` ‚Äî –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ Points (internal, service-to-service)
- [ ] `POST /v1/subtract` ‚Äî —Å–ø–∏—Å–∞–Ω–∏–µ Points (internal, service-to-service)

**–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö:**
- [ ] `Balance` ‚Äî –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] `Transaction` ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
- [ ] `AddPointsRequest` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ
- [ ] `SubtractPointsRequest` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–ø–∏—Å–∞–Ω–∏–µ

#### 2.5. Referral Service API (`referral.yaml`)

**Endpoints:**
- [ ] `GET /v1/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (auth required)
- [ ] `GET /v1/tree` ‚Äî –¥–µ—Ä–µ–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (auth required)
- [ ] `POST /v1/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É (internal)

**–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö:**
- [ ] `ReferralStats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- [ ] `ReferralTree` ‚Äî –¥–µ—Ä–µ–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- [ ] `RegisterReferralRequest` ‚Äî –∑–∞–ø—Ä–æ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### 2.6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Orval

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@orval/core` –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `orval.config.ts`:
  ```typescript
  export default {
    content: {
      input: './docs/openapi/content.yaml',
      output: {
        target: './packages/sdk/src/content.ts',
        client: 'react-query',
        mode: 'tags-split',
      },
      types: {
        output: './packages/types/src/content.ts',
      },
    },
    auth: {
      input: './docs/openapi/auth.yaml',
      output: {
        target: './packages/sdk/src/auth.ts',
        client: 'react-query',
      },
      types: {
        output: './packages/types/src/auth.ts',
      },
    },
    token: {
      input: './docs/openapi/token.yaml',
      output: {
        target: './packages/sdk/src/token.ts',
        client: 'react-query',
      },
      types: {
        output: './packages/types/src/token.ts',
      },
    },
    referral: {
      input: './docs/openapi/referral.yaml',
      output: {
        target: './packages/sdk/src/referral.ts',
        client: 'react-query',
      },
      types: {
        output: './packages/types/src/referral.ts',
      },
    },
  };
  ```

#### 2.7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `pnpm gen:all`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–∏–ø—ã —Å–æ–∑–¥–∞–Ω—ã –≤ `packages/types/`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ SDK —Å–æ–∑–¥–∞–Ω –≤ `packages/sdk/`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∏–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è

#### 2.8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ OpenAPI

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@stoplight/spectral-cli`
- [ ] –°–æ–∑–¥–∞—Ç—å `spectral.yaml` —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: `pnpm validate:openapi`

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API –æ–ø–∏—Å–∞–Ω—ã –≤ OpenAPI  
‚úÖ –¢–∏–ø—ã –∏ SDK –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è OpenAPI –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞  
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìÖ –î–µ–Ω—å 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### üéØ –¶–µ–ª—å –¥–Ω—è
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (JWT, –≤–∞–ª–∏–¥–∞—Ü–∏—è), –µ–¥–∏–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π –∏ health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 3.1. –ï–¥–∏–Ω—ã–π –ª–æ–≥–≥–µ—Ä (`packages/logger`)

- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç `packages/logger/`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:
  ```typescript
  // packages/logger/src/index.ts
  export function generateRequestId(): string {
    return crypto.randomUUID();
  }

  export function logRequest(
    requestId: string,
    method: string,
    path: string,
    duration: number,
    status: number
  ) {
    console.log(JSON.stringify({
      requestId,
      method,
      path,
      duration,
      status,
      timestamp: new Date().toISOString(),
    }));
  }

  export function logError(
    requestId: string,
    error: Error,
    context?: Record<string, unknown>
  ) {
    console.error(JSON.stringify({
      requestId,
      level: 'error',
      error: {
        message: error.message,
        stack: error.stack,
      },
      context,
      timestamp: new Date().toISOString(),
    }));
  }
  ```
- [ ] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

#### 3.2. JWT —É—Ç–∏–ª–∏—Ç—ã (`packages/logger/src/jwt.ts`)

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `jose` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT:
  ```typescript
  import * as jose from 'jose';

  export async function verifyJWT(token: string, secret: string) {
    const secretKey = new TextEncoder().encode(secret);
    const { payload } = await jose.jwtVerify(token, secretKey);
    return payload;
  }

  export async function signJWT(payload: object, secret: string) {
    const secretKey = new TextEncoder().encode(secret);
    return await new jose.SignJWT(payload)
      .setProtectedHeader({ alg: 'HS256' })
      .setIssuedAt()
      .setExpirationTime('2h')
      .sign(secretKey);
  }
  ```
- [ ] –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥—Ä—É–≥–∏–µ JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ `package.json`:
  ```json
  {
    "pnpm": {
      "overrides": {
        "jsonwebtoken": "npm:jose@latest",
        "@tsndr/cloudflare-worker-jwt": "npm:jose@latest"
      }
    }
  }
  ```

#### 3.3. Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ API Gateway

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `zod` –≤ `apps/api-gateway/`
- [ ] –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
  ```typescript
  // apps/api-gateway/src/middleware/validation.ts
  import { z } from 'zod';
  import { Context } from 'hono';

  export function validateBody<T extends z.ZodType>(schema: T) {
    return async (c: Context, next: () => Promise<void>) => {
      try {
        const body = await c.req.json();
        const validated = schema.parse(body);
        c.set('validatedBody', validated);
        await next();
      } catch (error) {
        if (error instanceof z.ZodError) {
          return c.json({
            error: {
              code: 'VALIDATION_ERROR',
              message: 'Invalid request parameters',
              details: error.errors,
            },
          }, 400);
        }
        throw error;
      }
    };
  }
  ```
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫ POST/PUT endpoints

#### 3.4. –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (X-Request-Id)

- [ ] –î–æ–±–∞–≤–∏—Ç—å middleware –≤ API Gateway:
  ```typescript
  // apps/api-gateway/src/middleware/tracing.ts
  import { generateRequestId } from '@go2asia/logger';

  export async function tracingMiddleware(c: Context, next: () => Promise<void>) {
    const requestId = c.req.header('X-Request-Id') || generateRequestId();
    c.set('requestId', requestId);
    c.header('X-Request-Id', requestId);
    
    const start = Date.now();
    await next();
    const duration = Date.now() - start;
    
    logRequest(requestId, c.req.method, c.req.path, duration, c.res.status);
  }
  ```
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É `X-Request-Id` –≤ –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ —Å–µ—Ä–≤–∏—Å–∞–º

#### 3.5. Health –∏ Ready endpoints

**–í –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `/health`:
  ```typescript
  app.get('/health', (c) => {
    return c.json({
      status: 'ok',
      timestamp: new Date().toISOString(),
      service: 'content-service',
    });
  });
  ```

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `/ready`:
  ```typescript
  app.get('/ready', async (c) => {
    try {
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
      await db.query('SELECT 1');
      return c.json({ status: 'ready' });
    } catch (error) {
      return c.json({
        status: 'not ready',
        error: error.message,
      }, 503);
    }
  });
  ```

**–°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- [ ] `services/auth-service/`
- [ ] `services/content-service/`
- [ ] `services/token-service/`
- [ ] `services/referral-service/`
- [ ] `apps/api-gateway/`

#### 3.6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- [ ] –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –≤ API Gateway:
  ```typescript
  // apps/api-gateway/src/utils/errors.ts
  export function createErrorResponse(
    code: string,
    message: string,
    traceId: string,
    key?: string,
    statusCode: number = 500
  ) {
    return {
      error: {
        code,
        message,
        traceId,
        ...(key && { key }),
      },
    };
  }
  ```
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∫–æ –≤—Å–µ–º –º–∞—Ä—à—Ä—É—Ç–∞–º

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ –ï–¥–∏–Ω—ã–π –ª–æ–≥–≥–µ—Ä —Å requestId —Å–æ–∑–¥–∞–Ω  
‚úÖ JWT —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `jose`  
‚úÖ Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Gateway  
‚úÖ Health/Ready endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  
‚úÖ –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìÖ –î–µ–Ω—å 4: CI/CD Pipeline

### üéØ –¶–µ–ª—å –¥–Ω—è
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π CI/CD pipeline —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏, —Ç–µ—Å—Ç–∞–º–∏ –∏ –¥–µ–ø–ª–æ–µ–º –Ω–∞ staging/prod.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 4.1. PR Pipeline (`.github/workflows/pr-checks.yml`)

- [ ] –°–æ–∑–¥–∞—Ç—å workflow –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ PR:
  ```yaml
  name: PR Checks

  on: [pull_request]

  jobs:
    lint-and-build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: pnpm/action-setup@v2
        - uses: actions/setup-node@v4
          with:
            node-version: '20'
            cache: 'pnpm'
        
        - run: pnpm install
        - run: pnpm lint
        - run: pnpm typecheck
        - run: pnpm build

    validate-openapi:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - run: |
            npm install -g @stoplight/spectral-cli
            spectral lint docs/openapi/**/*.yaml

    generate-and-check:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: pnpm/action-setup@v2
        - run: pnpm install
        - run: pnpm gen:all
        - run: |
            if [ -n "$(git diff --exit-code)" ]; then
              echo "Generated types/SDK differ from committed files"
              exit 1
            fi
  ```

#### 4.2. Contract Tests

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `schemathesis` –¥–ª—è contract —Ç–µ—Å—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å job –≤ PR pipeline:
  ```yaml
  contract-tests:
    runs-on: ubuntu-latest
    needs: [deploy-preview]
    steps:
      - uses: actions/checkout@v4
      - run: |
          pip install schemathesis
          schemathesis run \
            --base-url ${{ env.PREVIEW_URL }} \
            --checks all \
            docs/openapi/content.yaml
  ```

#### 4.3. E2E Tests

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Playwright –≤ `apps/go2asia-pwa-shell/`
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ smoke —Ç–µ—Å—Ç—ã:
  ```typescript
  // apps/go2asia-pwa-shell/tests/smoke.spec.ts
  import { test, expect } from '@playwright/test';

  test('homepage loads', async ({ page }) => {
    await page.goto('/');
    await expect(page).toHaveTitle(/Go2Asia/);
  });

  test('health check works', async ({ request }) => {
    const response = await request.get('https://api.go2asia.space/health');
    expect(response.ok()).toBeTruthy();
  });
  ```
- [ ] –î–æ–±–∞–≤–∏—Ç—å job –≤ PR pipeline:
  ```yaml
  e2e-tests:
    runs-on: ubuntu-latest
    needs: [deploy-preview]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: pnpm install
      - run: pnpm test:e2e
  ```

#### 4.4. Preview Deployments

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Netlify –¥–ª—è preview deployments
- [ ] –°–æ–∑–¥–∞—Ç—å workflow –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–µ–≤—å—é:
  ```yaml
  deploy-preview:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - run: pnpm install
      - run: pnpm build
      - uses: netlify/actions/cli@master
        with:
          args: deploy --dir=apps/go2asia-pwa-shell/.next --prod=false
        env:
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
  ```

#### 4.5. Staging Deploy (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

- [ ] –°–æ–∑–¥–∞—Ç—å workflow –¥–ª—è staging:
  ```yaml
  name: Deploy to Staging

  on:
    push:
      branches: [main]

  jobs:
    deploy-staging:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: pnpm/action-setup@v2
        - run: pnpm install
        - run: pnpm build
        - run: pnpm db:migrate:staging
        - run: pnpm deploy:staging
        - run: pnpm test:smoke:staging
  ```

#### 4.6. Production Deploy (—Ä—É—á–Ω–æ–π)

- [ ] –°–æ–∑–¥–∞—Ç—å workflow –¥–ª—è production:
  ```yaml
  name: Promote to Production

  on:
    workflow_dispatch:
      inputs:
        version:
          description: 'Version to deploy'
          required: true

  jobs:
    deploy-prod:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - uses: pnpm/action-setup@v2
        - run: pnpm install
        - run: pnpm build
        - run: pnpm db:migrate:prod
        - run: pnpm deploy:prod
        - run: pnpm test:smoke:prod
        - run: |
            if [ $? -ne 0 ]; then
              pnpm db:rollback:prod
              pnpm deploy:rollback:prod
            fi
  ```

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ PR pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏  
‚úÖ Preview deployments –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
‚úÖ Staging –¥–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π  
‚úÖ Production –¥–µ–ø–ª–æ–π —Ä—É—á–Ω–æ–π —Å rollback

---

## üìÖ –î–µ–Ω—å 5: Neon –∏ –¥–∞–Ω–Ω—ã–µ

### üéØ –¶–µ–ª—å –¥–Ω—è
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Neon PostgreSQL, –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Drizzle Kit, seed —Ñ–∞–π–ª—ã –∏ –±—ç–∫–∞–ø—ã.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 5.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Neon

- [ ] –°–æ–∑–¥–∞—Ç—å Neon –ø—Ä–æ–µ–∫—Ç –¥–ª—è staging
- [ ] –°–æ–∑–¥–∞—Ç—å Neon –ø—Ä–æ–µ–∫—Ç –¥–ª—è production
- [ ] –ü–æ–ª—É—á–∏—Ç—å connection strings –¥–ª—è –æ–±–æ–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `.env.example`:
  ```
  DATABASE_URL=postgresql://user:password@host/database
  ```

#### 5.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Drizzle Kit

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `drizzle-kit` –∏ `drizzle-orm` –≤ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å
- [ ] –°–æ–∑–¥–∞—Ç—å `drizzle.config.ts` –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ:
  ```typescript
  // services/content-service/drizzle.config.ts
  import type { Config } from 'drizzle-kit';

  export default {
    schema: './src/db/schema.ts',
    out: './migrations',
    driver: 'pg',
    dbCredentials: {
      connectionString: process.env.DATABASE_URL!,
    },
  } satisfies Config;
  ```
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Å—Ö–µ–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

#### 5.3. –ú–∏–≥—Ä–∞—Ü–∏–∏

**Content Service:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –¥–ª—è —Å—Ç—Ä–∞–Ω, –≥–æ—Ä–æ–¥–æ–≤, –º–µ—Å—Ç, —Å–æ–±—ã—Ç–∏–π, —Å—Ç–∞—Ç–µ–π
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é: `pnpm db:migrate:generate`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SQL —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π

**Auth Service:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

**Token Service:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –¥–ª—è –±–∞–ª–∞–Ω—Å–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π Points
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

**Referral Service:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

#### 5.4. Seed —Ñ–∞–π–ª—ã

- [ ] –°–æ–∑–¥–∞—Ç—å `seeds/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ
- [ ] –°–æ–∑–¥–∞—Ç—å seed —Ñ–∞–π–ª—ã –≤ UTF-8:
  ```
  services/content-service/
  ‚îú‚îÄ‚îÄ seeds/
  ‚îÇ   ‚îú‚îÄ‚îÄ countries.sql
  ‚îÇ   ‚îú‚îÄ‚îÄ cities.sql
  ‚îÇ   ‚îî‚îÄ‚îÄ places.sql
  ```
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å SQL seed —Ñ–∞–π–ª—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–æ–≤ (UTF-8)

#### 5.5. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π

**–í –∫–æ—Ä–Ω–µ–≤–æ–º `package.json`:**
```json
{
  "scripts": {
    "db:migrate:generate": "turbo run db:migrate:generate",
    "db:migrate:up": "turbo run db:migrate:up",
    "db:migrate:down": "turbo run db:migrate:down",
    "db:migrate:status": "turbo run db:migrate:status",
    "db:seed": "turbo run db:seed",
    "db:migrate:staging": "DATABASE_URL=$STAGING_DB_URL pnpm db:migrate:up",
    "db:migrate:prod": "DATABASE_URL=$PROD_DB_URL pnpm db:migrate:up",
    "db:rollback:prod": "DATABASE_URL=$PROD_DB_URL pnpm db:migrate:down"
  }
}
```

#### 5.6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–∞–ø–æ–≤

- [ ] –í–∫–ª—é—á–∏—Ç—å Point-in-Time Recovery (PITR) –≤ Neon
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (–∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ (–º–∏–Ω–∏–º—É–º 30 –¥–Ω–µ–π)
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç `/docs/ops/BACKUP_RECOVERY.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

#### 5.7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ rollback

- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ staging
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (`db:migrate:down`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤ runbook

#### 5.8. CI –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É UTF-8 –≤ CI:
  ```yaml
  - name: Check seed encoding
    run: |
      file -bi services/*/seeds/*.sql | grep -q "charset=utf-8" || exit 1
  ```

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ Neon –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è staging –∏ production  
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ Drizzle Kit  
‚úÖ Seed —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã –≤ UTF-8  
‚úÖ –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
‚úÖ Rollback –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

---

## üìÖ –î–µ–Ω—å 6: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–ª—ë—Ä—Ç—ã

### üéØ –¶–µ–ª—å –¥–Ω—è
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints, –∞–ª—ë—Ä—Ç—ã Cloudflare –∏ –±–∞–∑–æ–≤—ã–µ runbooks.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 6.1. –ö—ç—à-–º–∞—Ç—Ä–∏—Ü–∞

- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç `/docs/ops/CACHE_STRATEGY.md` —Å –º–∞—Ç—Ä–∏—Ü–µ–π TTL
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
  - –ü—É–±–ª–∏—á–Ω—ã–µ GET: `public, s-maxage=300, stale-while-revalidate=60`
  - –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ GET: `no-store, no-cache, must-revalidate`

#### 6.2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Gateway

- [ ] –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:
  ```typescript
  // apps/api-gateway/src/middleware/cache.ts
  export function cacheMiddleware(isPublic: boolean) {
    return async (c: Context, next: () => Promise<void>) => {
      await next();
      
      if (isPublic && c.req.method === 'GET') {
        c.header('Cache-Control', 'public, s-maxage=300, stale-while-revalidate=60');
        c.header('Vary', 'Accept, Accept-Encoding');
      } else {
        c.header('Cache-Control', 'no-store, no-cache, must-revalidate');
        c.header('Pragma', 'no-cache');
      }
    };
  }
  ```
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –ø—É–±–ª–∏—á–Ω—ã–º endpoints (`/v1/api/content/*`)
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å `no-store` –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º endpoints (`/v1/api/token/*`, `/v1/api/referral/*`)

#### 6.3. –¢–µ—Å—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫—ç—à–∞

- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã:
  ```typescript
  // tests/cache-headers.test.ts
  import { test, expect } from 'vitest';

  test('public endpoints have cache headers', async () => {
    const response = await fetch('https://api.go2asia.space/v1/api/content/countries');
    expect(response.headers.get('Cache-Control')).toContain('s-maxage=300');
  });

  test('private endpoints have no-store', async () => {
    const response = await fetch('https://api.go2asia.space/v1/api/token/balance', {
      headers: { Authorization: `Bearer ${token}` }
    });
    expect(response.headers.get('Cache-Control')).toContain('no-store');
  });
  ```
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ CI pipeline

#### 6.4. Cloudflare Alerts

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (P0):**
- [ ] Error rate > 1% –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç
- [ ] Availability < 99% –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç
- [ ] Latency p95 > 1000ms –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–µ (P1):**
- [ ] Error rate > 0.5% –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç
- [ ] Latency p95 > 500ms –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç
- [ ] Error budget –∏—Å—á–µ—Ä–ø–∞–Ω –Ω–∞ 50%

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
- [ ] Cloudflare Dashboard ‚Üí Analytics ‚Üí Alerts
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–ª–µ—Ä—Ç–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email, Slack, PagerDuty)

#### 6.5. Runbooks

- [ ] –°–æ–∑–¥–∞—Ç—å `/docs/ops/RUNBOOKS.md`
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å runbooks –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤:
  - [ ] –û—à–∏–±–∫–∏ 5xx –≤ Content Service
  - [ ] –í—Å–ø–ª–µ—Å–∫ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
  - [ ] –û—à–∏–±–∫–∏ Clerk Webhook
  - [ ] –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î
  - [ ] –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit

**–§–æ—Ä–º–∞—Ç runbook:**
```markdown
## Runbook: –û—à–∏–±–∫–∏ 5xx –≤ Content Service

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ê–ª–µ—Ä—Ç: Error rate > 1%
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Cloudflare Workers
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Neon –ë–î
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `/ready` endpoint

**–†–µ—à–µ–Ω–∏–µ:**
1. –ï—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Neon dashboard
2. –ï—Å–ª–∏ –∫–æ–¥ –æ—à–∏–±–∫–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
3. –ï—Å–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ–π ‚Üí –ø–æ–¥–æ–∂–¥–∞—Ç—å 5 –º–∏–Ω—É—Ç

**–≠—Å–∫–∞–ª–∞—Ü–∏—è:**
- –ï—Å–ª–∏ –Ω–µ —Ä–µ—à–µ–Ω–æ –∑–∞ 15 –º–∏–Ω—É—Ç ‚Üí —Å–≤—è–∑–∞—Ç—å—Å—è —Å DevOps
```

#### 6.6. SLO/SLI –º–µ—Ç—Ä–∏–∫–∏

- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å Service Level Objectives:
  | –°–µ—Ä–≤–∏—Å | Availability | Latency p95 | Error Rate |
  |--------|--------------|-------------|------------|
  | API Gateway | 99.9% | <200ms (GET), <500ms (POST) | <0.1% |
  | Content Service | 99.5% | <300ms | <0.2% |
  | Auth Service | 99.95% | <150ms | <0.05% |
  | Token Service | 99.9% | <200ms | <0.1% |

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –≤ Cloudflare Analytics
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ error budget

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ –ö—ç—à-–º–∞—Ç—Ä–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ Gateway  
‚úÖ –¢–µ—Å—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç  
‚úÖ –ê–ª—ë—Ä—Ç—ã Cloudflare –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
‚úÖ Runbooks —Å–æ–∑–¥–∞–Ω—ã

---

## üìÖ –î–µ–Ω—å 7: –§—Ä–æ–Ω—Ç –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### üéØ –¶–µ–ª—å –¥–Ω—è
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSR/SSG –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SEO –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ exit-–∫—Ä–∏—Ç–µ—Ä–∏–∏.

### ‚úÖ –ó–∞–¥–∞—á–∏

#### 7.1. SSR –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**Atlas Asia:**
- [ ] –°–æ–∑–¥–∞—Ç—å `app/(public)/atlas/countries/[id]/page.tsx`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `generateStaticParams` –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `generateMetadata` –¥–ª—è SEO
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSR –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**Blog Asia:**
- [ ] –°–æ–∑–¥–∞—Ç—å `app/(public)/blog/page.tsx`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSG —Å `revalidate = 3600`
- [ ] –°–æ–∑–¥–∞—Ç—å `app/(public)/blog/[slug]/page.tsx` –¥–ª—è —Å—Ç–∞—Ç–µ–π

**Pulse Asia:**
- [ ] –°–æ–∑–¥–∞—Ç—å `app/(public)/pulse/page.tsx`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSR –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π

#### 7.2. –ú–µ—Ç–∞-—Ç–µ–≥–∏ (OpenGraph, Twitter)

- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `components/og-metadata.tsx`:
  ```typescript
  export function OgMetadata({
    title,
    description,
    image,
    url,
  }: OgMetadataProps) {
    return (
      <>
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={image} />
        <meta property="og:url" content={url} />
        <meta name="twitter:card" content="summary_large_image" />
      </>
    );
  }
  ```
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –ø—É–±–ª–∏—á–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

#### 7.3. Sitemap –∏ Robots.txt

- [ ] –°–æ–∑–¥–∞—Ç—å `app/sitemap.ts`:
  ```typescript
  export default async function sitemap() {
    const countries = await fetchCountries();
    const articles = await fetchArticles();
    
    return [
      ...countries.map((country) => ({
        url: `https://go2asia.space/atlas/countries/${country.id}`,
        lastModified: country.updatedAt,
      })),
      ...articles.map((article) => ({
        url: `https://go2asia.space/blog/${article.slug}`,
        lastModified: article.publishedAt,
      })),
    ];
  }
  ```

- [ ] –°–æ–∑–¥–∞—Ç—å `app/robots.ts`:
  ```typescript
  export default function robots() {
    return {
      rules: [
        {
          userAgent: '*',
          allow: '/',
          disallow: ['/api/', '/connect/', '/profile/'],
        },
      ],
      sitemap: 'https://go2asia.space/sitemap.xml',
    };
  }
  ```

#### 7.4. Skeleton UI

- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∫–µ–ª–µ—Ç–æ–Ω–æ–≤:
  ```typescript
  // components/skeletons/CountrySkeleton.tsx
  export function CountrySkeleton() {
    return (
      <div className="animate-pulse">
        <div className="h-8 bg-gray-200 rounded w-3/4 mb-4" />
        <div className="h-4 bg-gray-200 rounded w-full mb-2" />
        <div className="h-4 bg-gray-200 rounded w-5/6" />
      </div>
    );
  }
  ```
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –∑–∞–≥—Ä—É–∑–∫–∏

#### 7.5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- [ ] –°–æ–∑–¥–∞—Ç—å `app/error.tsx`:
  ```typescript
  'use client';

  export default function Error({
    error,
    reset,
  }: {
    error: Error;
    reset: () => void;
  }) {
    return (
      <div>
        <h2>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
        <button onClick={reset}>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
      </div>
    );
  }
  ```

- [ ] –°–æ–∑–¥–∞—Ç—å `app/not-found.tsx` –¥–ª—è 404 —Å—Ç—Ä–∞–Ω–∏—Ü

#### 7.6. Lighthouse –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Lighthouse CI:
  ```yaml
  - name: Lighthouse CI
    uses: treosh/lighthouse-ci-action@v10
    with:
      urls: |
        https://go2asia.space
        https://go2asia.space/atlas
        https://go2asia.space/blog
      uploadArtifacts: true
      temporaryPublicStorage: true
  ```
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:
  - Performance ‚â• 85
  - SEO ‚â• 85
  - Best Practices ‚â• 85
  - Accessibility ‚â• 85

#### 7.7. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ exit-–∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

**OpenAPI –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
- [ ] –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –æ–ø–∏—Å–∞–Ω—ã –≤ OpenAPI
- [ ] –¢–∏–ø—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] SDK –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] CI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤

**CI/CD:**
- [ ] PR pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Preview deployments –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

**Observability:**
- [ ] `/health` —É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] `/ready` —É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] RequestId —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–ª—ë—Ä—Ç—ã Cloudflare –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Runbooks —Å–æ–∑–¥–∞–Ω—ã

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [ ] –ö—ç—à-–º–∞—Ç—Ä–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –ü—É–±–ª–∏—á–Ω—ã–µ GET –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ endpoints –∏–º–µ—é—Ç `no-store`
- [ ] –¢–µ—Å—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- [ ] –¢–æ–ª—å–∫–æ `jose` –¥–ª—è JWT
- [ ] Zod-–≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ Gateway
- [ ] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–î–∞–Ω–Ω—ã–µ:**
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Seed —Ñ–∞–π–ª—ã –≤ UTF-8
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Rollback –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

**–§—Ä–æ–Ω—Ç:**
- [ ] SSR –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] SSG –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Sitemap –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] Robots.txt –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Lighthouse ‚â• 85 (Perf/SEO/Best)

### üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–Ω—è
‚úÖ SSR/SSG —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  
‚úÖ SEO –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (–º–µ—Ç–∞-—Ç–µ–≥–∏, sitemap, robots)  
‚úÖ Skeleton UI –¥–æ–±–∞–≤–ª–µ–Ω  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞  
‚úÖ –í—Å–µ exit-–∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

## üéØ Exit-–∫—Ä–∏—Ç–µ—Ä–∏–∏ –§–∞–∑—ã 0 (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

- [ ] **–ú–æ–Ω–æ—Ä–µ–ø–æ:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –∫–∞–ø—Å—É–ª—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] **OpenAPI:** –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API –æ–ø–∏—Å–∞–Ω—ã, —Ç–∏–ø—ã/SDK –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] **CI/CD:** PR pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç, preview/staging/prod –¥–µ–ø–ª–æ–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] **Observability:** Health/Ready endpoints, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–ª—ë—Ä—Ç—ã, runbooks
- [ ] **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** JWT —á–µ—Ä–µ–∑ jose, –≤–∞–ª–∏–¥–∞—Ü–∏—è Zod, rate limiting, CORS
- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ú–∞—Ç—Ä–∏—Ü–∞ TTL –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] **–ë–î:** –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, seed —Ñ–∞–π–ª—ã UTF-8, –±—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] **–§—Ä–æ–Ω—Ç:** SSR/SSG —Ä–∞–±–æ—Ç–∞–µ—Ç, SEO –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ, Lighthouse ‚â• 85

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|-----------|------|--------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ | 100% | ‚¨ú |
| OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ | 100% | ‚¨ú |
| CI/CD Pipeline | 100% | ‚¨ú |
| Observability | 100% | ‚¨ú |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 100% | ‚¨ú |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ | 100% | ‚¨ú |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | 100% | ‚¨ú |
| –§—Ä–æ–Ω—Ç–µ–Ω–¥ | 100% | ‚¨ú |

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 0% ‚Üí –¶–µ–ª—å: 100%

---

## üö® –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ñ—Ä–æ–Ω—Ç/–±—ç–∫
**–†–µ—à–µ–Ω–∏–µ:** CI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–æ–º–º–∏—Ç–æ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 2: JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã
**–†–µ—à–µ–Ω–∏–µ:** `pnpm overrides` –∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥—Ä—É–≥–∏–µ JWT –ø–∞–∫–µ—Ç—ã, —Ç–æ–ª—å–∫–æ `jose`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö—ç—à –∫–µ—à–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–∫—É
**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ—Ç–µ—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ CI, `no-store` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Seed —Ñ–∞–π–ª—ã –Ω–µ –≤ UTF-8
**–†–µ—à–µ–Ω–∏–µ:** CI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É –≤—Å–µ—Ö SQL —Ñ–∞–π–ª–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ù–µ–∑–∞–º–µ—Ç–Ω—ã–µ 5xx
**–†–µ—à–µ–Ω–∏–µ:** –ê–ª—ë—Ä—Ç—ã Cloudflare –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è, runbooks –≥–æ—Ç–æ–≤—ã

---

## üìö –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –§–∞–∑—ã 0

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 0 –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫:

1. **–§–∞–∑–∞ 1:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (Auth, Content, Token, Referral)
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∫ API
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
4. **–ú–æ–¥—É–ª–∏:** –ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π (Guru, Atlas, Pulse, Blog)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-12  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

